<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sUndergroundPrarie</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>oEnemy</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>turn_speed = room_speed
alarm[0] = turn_speed
ramming = false
true_x = x
true_y = y
image_speed = 0
hp = 1
burrow = 1
self_destruct = false
// thrown rock vars
rock_thrown = false
rock_true_x = x
rock_true_y = y
rock_speed = 0
rock_dir = 0
rock_x = x
rock_y = y
rock_turn_speed = turn_speed/3
rock_airtime = rock_turn_speed*10
boulder_angle = 0
parried = false
parried_speed = 10
rock_angle = 90
rock_dis = 10
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ds_grid_set(grid_map,true_x/64,true_y/64,0)

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if self_destruct = false
instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>rock_thrown = false
if oHero.x = rock_x and oHero.y = rock_y
    damage_player()
if self_destruct = true
    instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>rock_speed = 0
rock_y = rock_true_y
rock_x = rock_true_x
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>rock_speed = 0
rock_y = rock_true_y
rock_x = rock_true_x
var rock_x_previous = rock_x
var rock_y_previous = rock_y
        if oHero.x != rock_x or oHero.y != rock_y
        if abs(oHero.x - rock_x) &gt; abs(oHero.y - rock_y)
            if oHero.x &gt; rock_x
                rock_x+=64
            else
                rock_x-=64
        else
            if oHero.y &gt; rock_y
                rock_y+=64
            else
                rock_y-=64
if rock_turn_speed*5 &lt; alarm[3]
    alarm[1] = rock_turn_speed
else
    alarm[2] = rock_turn_speed
if rock_x!=rock_x_previous or rock_y!=rock_y_previous
{
    rock_true_x = rock_x
    rock_true_y = rock_y
    rock_speed = 64/rock_turn_speed
    rock_dir = point_direction(rock_x_previous,rock_y_previous,rock_true_x,rock_true_y)
    rock_y = rock_y_previous
    rock_x = rock_x_previous
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if rock_thrown = false and ds_grid_get(grid_map,x/64,y/64) = 0 and random(1)&gt;.5
{
burrow = 0
}else{
if burrow = 0
ds_grid_set(grid_map,x/64,y/64,0)
burrow = 1
}
if burrow = 1
{
sprite_index = sUndergroundPrarie
var i = 0
    while(i &lt; 4)
    {
    switch(irandom(3))
    {
        case 0:
            y-=64;
        break;
        case 1:
            y+=64;
        break;
        case 2:
            x-=64;
        break;
        case 3:
            x+=64;
    }
    if ds_grid_get(grid_map,x/64,y/64) != 0  or x &lt; 0  or y &lt; 0 or x &gt;= 64*16 or y &gt;= 64*10 
    {
        y = yprevious
        x = xprevious
    }
    else
    {
        break;
    }
    i++
    }
}
else
{
    ds_grid_set(grid_map,x/64,y/64,id)
    sprite_index = sPrairieDog
    alarm[1] = rock_turn_speed
    rock_thrown = true
    rock_x = oHero.x
    rock_y = oHero.y
    rock_true_x = rock_x
    rock_true_y = rock_y
    alarm[3] = rock_airtime
}
alarm[0] = turn_speed
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>rock_x += lengthdir_x(rock_speed,rock_dir)
rock_y += lengthdir_y(rock_speed,rock_dir)
boulder_angle ++
rock_angle+=5
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>parried = true
alarm[0] = 0
alarm[4] = point_distance(rock_true_x,rock_true_y,x,y)/parried_speed
rock_speed = parried_speed
rock_dir = point_direction(rock_true_x,rock_true_y,x,y)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>do nothing</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if rock_thrown = true and rock_turn_speed*2 &gt; alarm[3]
{
    draw_sprite_ext(sRock,0,32+rock_x+ lengthdir_x(rock_dis,rock_angle),32+rock_y - (alarm[3]/(rock_turn_speed*2))*64*3+ lengthdir_y(rock_dis,rock_angle),1,1,boulder_angle,c_white,(rock_turn_speed*2-alarm[3])/(rock_turn_speed*2))
}else if rock_thrown = true and alarm[3] &gt; rock_turn_speed * 9 
{
    draw_sprite_ext(sRock,0,32+x,y - 200*(rock_turn_speed-alarm[1])/rock_turn_speed,1,1,boulder_angle,c_white,alarm[1]/rock_turn_speed)
}
if parried =true
{
    draw_sprite_ext(sRock,0,32+rock_x,32+rock_y,1,1,boulder_angle,c_white,1)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ds_grid_get(grid_map,x/64,y/64) != -1 and self_destruct = false
    draw_self()
if rock_thrown = true
{
    draw_sprite_ext(sRock,0, 32+rock_x + lengthdir_x(rock_dis,rock_angle), 32+rock_y + lengthdir_y(rock_dis,rock_angle), 1, 1, boulder_angle, c_black,.5 * (rock_airtime-alarm[3])/rock_airtime + .3)
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
